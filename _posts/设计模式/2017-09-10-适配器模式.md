---
layout: post
title: é€‚é…å™¨æ¨¡å¼
category: è¯»ä¹¦ç¬”è®°/æ·±å…¥æµ…å‡ºè®¾è®¡æ¨¡å¼(Java)âœ¨âœ¨âœ¨âœ¨
---

## ç›®çš„

å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢ä¸ºå¦ä¸€ä¸ªç¬¦åˆå®¢æˆ·æœŸæœ›çš„æ¥å£

**è¾¾åˆ°çš„ç›®çš„: **

## ç§ç±»

**æœ‰ä¸¤ç§:**

* å¯¹è±¡é€‚é…å™¨  
  ![0e974c957f1d3fd4.png | center]({{site.imgurl}}/archive/designPattern/adapterPattern1.png)
* [ ] ç±»é€‚é…å™¨ï¼ˆå—·ï½ï½æš‚æ—¶æ²¡æœ‰å®é™…åœºæ™¯è®©è‡ªå·±å®Œå…¨æ˜ç™½å—·ğŸ±ï¼‰
 
* **NOTE:**  å¯¹è±¡é€‚é…å™¨å’Œç±»é€‚é…å™¨ä½¿ç”¨ä¸¤ç§ä¸åŒçš„é€‚é…æ–¹æ³•ï¼ˆåˆ†åˆ«æ˜¯ç»„åˆå§”æ‰˜å’Œç»§æ‰¿ï¼‰


## ä¸¾ä¸ªä¾‹å­

æˆ‘è¿™é‡Œå°±æ‹¿ä½¿ç”¨ä¸‰è„šæ’å¤´å……ç”µçš„è‹¹æœæ‰‹æœº(æ¸¯ç‰ˆå……ç”µå™¨)æ¥ä¸¾ä¸ªä¾‹å­å§ï½å’Œå›¾ä¸­ä¾‹å­ç›¸å
![]({{site.imgurl}}/archive/designPattern/adapterPattern2.png)


```
interface IPhoneCharger {
    chargeWith3Footer(): void;
}

// Target
interface PrimaryCharger {
    chargeWith2Footer(): void;
}

// adaptee 
// è‹¹æœæ‰‹æœºå®ç°è‹¹æœæ‰‹æœºå……ç”µå™¨æ¥å£
class IPhone implements IPhoneCharger {
  chargeWith3Footer() {
      console.log("è‹¹æœæ‰‹æœºå¼€å§‹å……ç”µå•¦ï½ï½ï½ğŸ”‹")
  }
}

// adapter
// æ™®é€šå……ç”µå™¨é€‚é…å™¨ - å®ç°æ™®é€šå……ç”µå™¨æ¥å£ - ä½¿è‹¹æœæ‰‹æœºç­‰å…¶ä»–å……ç”µå™¨å¯ä»¥é€‚é…æ™®é€š2è„šå……ç”µå™¨è¿›è¡Œå……ç”µ
class PrimaryChargerAdapter implements PrimaryCharger {
    
    private phone: any;
    constructor(phone: any) {
        this.phone = phone;
    }
    chargeWith2Footer(): void {
        if (this.phone.constructor === IPhone) {
		  // é€‚é…å™¨åœ¨è¿™é‡Œé€‚é…ä¸‰è„šå’ŒäºŒè„šå……ç”µå™¨æ¥å£
          this.phone.chargeWith3Footer();
        }
    }
}

function TestDemo() {
    const iPhone = new IPhone();
	
	// iPhone.chargeWith2Foot(); // will fail
   // ä¸­å›½å¤§é™†ä¸€èˆ¬éƒ½æ˜¯2æ’å£æ’åº§ï½éœ€è¦ä½¿ç”¨2è„šå……ç”µå™¨å……ç”µ chargeWith2Footer(),
   // ä½†æ˜¯è‹¹æœæ‰‹æœºæ˜¯ä¸‰è„šå……ç”µå™¨ä¸æ”¯æŒ~~
	
    // é€šè¿‡å……ç”µå™¨é€‚é…å™¨ï¼Œå®ç°äº†chargeWith2Footer(),ç¬¦åˆå®¢æˆ·æœŸæœ›çš„æ¥å£ï½ï½ï½
    const adaptedIPhone = new PrimaryChargerAdapter(iPhone);
    adaptedIPhone.chargeWith2Footer(); // å®Œç¾ï½ï½
}

TestDemo();
```

* [åœ¨çº¿æµ‹è¯•](https://codepen.io/kasmine/pen/aLdxgO)

### å¯¹å·å…¥åº§
![f89a743d756fe527.png | center]({{site.imgurl}}/archive/designPattern/adapterPattern3.png)


## Javaä¸­çš„é€‚é…å™¨


![]({{site.imgurl}}/archive/designPattern/adapterPattern4.png)


**å®¢æˆ·ä½¿ç”¨é€‚é…å™¨çš„è¿‡ç¨‹è§£æ:**

1. å®¢æˆ·é€šè¿‡ç›®æ ‡æ¥å£è°ƒç”¨é€‚é…å™¨çš„æ–¹æ³•å¯¹é€‚é…å™¨å‘èµ·è¯·æ±‚
2. é€‚é…å™¨ä½¿ç”¨è¢«é€‚é…è€…æ¥å£æŠŠè¯·æ±‚æ¢æˆè¢«é€‚é…è€…çš„ä¸€ä¸ªæˆ–å¤šä¸ªè°ƒç”¨æ¥å£
3. å®¢æˆ·æ”¶åˆ°è°ƒç”¨çš„ç»“æœï¼Œä½†æœªå¯Ÿè§‰ä¸€åˆ‡æ˜¯é€‚é…å™¨çš„è½¬æ¢ä½œç”¨ã€‚


```ts
// Â æ”¹é€ æˆtså½¢å¼ï½ï½
class OldClassAdapter implements NewInterface {
  private OldClass ref;
  constructor(OldClass oc) {
    this.ref = oc;
  }
  public NewMethod(): void {
     this.ref.OldMethod();
  }
}
```

* æˆ–è®¸ç»“åˆè¿™ä¸€æ®µä»£ç å°±å¯ä»¥æ›´åŠ ç†è§£é€‚é…å™¨æ¨¡å¼ä½¿ç”¨çš„åœºæ™¯


## æ€è€ƒ ğŸ’¡

* æˆ‘æ‰€è®¤ä¸ºçš„é€‚é…å™¨æ¨¡å¼åº”è¯¥å°½é‡ä¸å»ä¿®æ”¹è¢«é€‚é…è€…ã€‚
* çœŸæ­£æƒ³åšçš„æ˜¯åº”è¯¥æ˜¯æ¥å£çš„è½¬æ¢ã€‚


![]({{site.imgurl}}/archive/designPattern/adapterPattern5.png)

## ä¼˜ç‚¹

å¯¹è±¡é€‚é…å™¨æ¨¡å¼ä¼˜ç‚¹ï¼š
(1) ä¸€ä¸ªå¯¹è±¡é€‚é…å™¨å¯ä»¥æŠŠå¤šä¸ªä¸åŒçš„é€‚é…è€…é€‚é…åˆ°åŒä¸€ä¸ªç›®æ ‡ï¼›
(2) å°†ç›®æ ‡ç±»å’Œè¢«é€‚é…è€…ç±»è§£è€¦ï¼Œé€šè¿‡å¼•å…¥ä¸€ä¸ªé€‚é…å™¨ç±»æ¥é‡ç”¨ç°æœ‰çš„è¢«é€‚é…è€…ç±»ï¼Œæ— é¡»ä¿®æ”¹åŸæœ‰ç»“æ„ã€‚

## ç¼ºç‚¹

è¿‡å¤šçš„ä½¿ç”¨é€‚é…å™¨ï¼Œä¼šè®©ç³»ç»Ÿéå¸¸é›¶ä¹±ï¼Œä¸æ˜“æ•´ä½“è¿›è¡ŒæŠŠæ¡ã€‚æ¯”å¦‚ï¼Œæ˜æ˜çœ‹åˆ°è°ƒç”¨çš„æ˜¯ A æ¥å£ï¼Œå…¶å®å†…éƒ¨è¢«é€‚é…æˆäº† B æ¥å£çš„å®ç°.

## é€‚é…å™¨æ¨¡å¼ VS å¤–è§‚æ¨¡å¼

å…ˆçœ‹ä¸‹é¢è¿™æ®µç†Ÿæ‚‰çš„ä»£ç ï½ï½ æ‘˜è‡ª @è¿œå³°

```ts
// ç»Ÿä¸€çš„æ¥å£é€‚é…ä¸åŒç±»
// Target å®¢æˆ·æœŸæœ›ä½¿ç”¨çš„æ¥å£
interface ComputerInterface {
  usb(): void;
}

// Adaptee 
class HuaweiPhone {
  huaweiInterface(): void {
    console.log('åä¸ºæ‰‹æœºçš„æ•°æ®æ¥å£');
  }
}

// Adaptee 
class Iphone {
  iphoneInterface(): void {
    console.log('è‹¹æœæ‰‹æœºçš„æ•°æ®æ¥å£');
  }
}

// Class Adapter 
class HuaweiDataWireAdapter extends HuaweiPhone implements ComputerInterface {
  usb(): void {
    console.log('ä½¿ç”¨åä¸ºæ•°æ®çº¿è¿æ¥');
    super.huaweiInterface();
  }
}

class IphoneDataWireAdapter extends Iphone implements ComputerInterface {
  usb(): void {
    console.log('ä½¿ç”¨è‹¹æœæ•°æ®çº¿è¿æ¥');
    super.iphoneInterface();
  }
}

function commonAdapterDemo() {
  const computer1 = new HuaweiDataWireAdapter();
  computer1.usb();
  const computer2 = new IphoneDataWireAdapter();
  computer2.usb();

}
commonAdapterDemo();
```

* æœ‰äº›è¯¯è§£å°±æ˜¯ä¸€ä¸ªé€‚é…å™¨åªç”¨æ¥é€‚é…ä¸€ä¸ªç±»ï¼Œä½†å…¶å®é€‚é…å™¨æ¨¡å¼ä¹Ÿå¯ä»¥åŒ…è£…å¤šä¸ªç±»ã€‚

* è¿™ä¸ªä¾‹å­å°±æ˜¯ä¸€ä¸ªç±»é€‚é…å™¨çš„åº”ç”¨ã€‚å®¢æˆ·æœŸæœ›ä½¿ç”¨ä»–ä»¬è‡ªå·±çš„æ•°æ®çº¿è¿æ¥ `~.usb()`ï¼Œç„¶åé€šè¿‡é€‚é…å™¨åšäº†ä¸€ä¸ªè½¬æ¢ï¼Œäº‹å®ä¸Šæ²¡æœ‰è¯´å°†åä¸ºæ‰‹æœºå’Œè‹¹æœæ‰‹æœºçš„æ•°æ®çº¿æ¥å£ç»™é‡æ–°è®¾è®¡äº†ï½

* [ ] ç›¸ç±»ä¼¼çš„æ˜¯å¤–è§‚æ¨¡å¼ï¼Œè¿˜æ²¡æ€è€ƒ(ğŸ¶ ç‹—å¸¦äº†)


**NOTE:** å¤–è§‚å’Œé€‚é…å™¨æ¨¡å¼éƒ½å¯ä»¥åŒ…è£…è®¸å¤šç±»ï¼Œä½†æ˜¯å¤–è§‚æ¨¡å¼æ˜¯ä¸ºäº†ç®€åŒ–æ“ä½œï¼Œè€Œé€‚é…å™¨æ¨¡å¼æ˜¯å°†æ¥å£è½¬æ¢ä¸ºä¸åŒæ¥å£

## Q & A

* ä¸€ä¸ªé€‚é…å™¨éœ€è¦åšå¤šå°‘â€œé€‚é…â€å·¥ä½œï¼Ÿ  
  é€‚é…å™¨åšçš„å·¥ä½œå’Œç›®æ ‡æ¥å£çš„å¤§å°æˆæ­£æ¯”


## å‚è€ƒèµ„æ–™

* [Head First è®¾è®¡æ¨¡å¼](https://book.douban.com/subject/2243615/)


